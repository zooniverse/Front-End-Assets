$bg-color: transparentize(black, 0.2);
$fg-color: white;
$border: transparentize($fg-color, 0.8);

$height: 35px;

@mixin transition($args) {
  -moz-transition: $args;
  -webkit-transition: $args;
  transition: $args;
}

// Menu bar
#zooniverse-bar {
  background: $bg-color;
  border-bottom: 1px solid $border;
  color: $fg-color;
  font: {
    family: Titillium, sans-serif;
    size: 12px;
  };
  height: $height;
  padding: 0 20px;
  position: relative;
  z-index: 10;

  // Bar item group
  > ul {
    margin: 0;
    padding: 0;

    &.leading {
      float: left;

      > li {
        border-right: 1px solid $border;

        > div,
        > ul {
          left: 0;
          right: auto;
        }
      }
    }

    &.trailing {
      float: right;

      > li {
        border-left: 1px solid $border;

        > div,
        > ul {
          left: auto;
          right: 0;
        }
      }
    }

    // Bar item
    > li {
      display: inline-block;
      font-family: TitilliumText22LRegular, sans-serif;
      height: $height;
      letter-spacing: 1px;
      line-height: $height + ($height / 10);
      position: relative;
      text-transform: uppercase;
      white-space: nowrap;

      // Bar item label
      > :first-child {
        color: transparentize($fg-color, 0.2);
        display: inline-block;
        padding: 0 15px;
        text-decoration: none;
        &:hover {
          color: $fg-color;
        }

        // Menu or dropdown
        & + div,
        & + ul {
          background: $bg-color;
          border: 1px solid $border {
            radius: 0 0 5px 5px;
            top: 0;
          };
          display: none;
          line-height: normal;
          margin: 0;
          padding: 0;
          position: absolute;
          top: 100%;

          // Extra space for cursor overshoot
          &:after {
            content: " ";
            display: block;
            height: 100%;
            left: 0;
            margin: 0 0 0 -20px;
            padding: 0 20px 200px;
            position: absolute;
            top: 0;
            width: 100%;
            z-index: -1;
          }

          // Menu item
          > li {
            > label {
              border-top: 1px solid $border;
              color: transparentize($fg-color, 0.2);
              cursor: pointer;
              display: block;
              font-family: TitilliumText22LThin, sans-serif;
              font-size: 18px;
              padding: 10px 0 5px;
              text-align: center;
              &:hover {
                color: $fg-color;
              }
            }

            // Accordion heading
            > input[type="radio"],
            > input[type="checkbox"] {
              display: none;
              &:checked {
                + ul {
                  border-color: $border;
                  max-height: 250px;
                }
              }
            }

            // Accordion menu
            > ul {
              @include transition(max-height 0.5s ease-in-out);
              border-top: 1px solid transparent;
              margin: 0;
              max-height: 0;
              overflow: hidden;
              padding: 0;

              // Accordion menu item
              > li {
                font-size: 10px;
                padding: 2px 15px;
                white-space: nowrap;

                &:first-child {
                  padding-top: 15px;
                }

                &:last-child {
                  padding-bottom: 15px;
                }

                > a {
                  display: block;
                }
              }
            }
          }
        }
      }

      // Menu or dropdown (with its item hovered)
      &:hover > :first-child + div,
      &:hover > :first-child + ul {
          display: block;
      }
    }
  }
}
