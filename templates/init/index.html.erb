<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />

    <title><%= project %></title>

    <link href="./styles/main.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="./scripts/lib/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="<%= project_dash %> app">
      <header>
        <h1><%= project %></h1>
        <nav>
          <ul>
            <li><a href="#!/home">Home</a></li>
            <li><a href="#!/about">About</a></li>
            <li><a href="#!/classify">Classify</a></li>
            <li><a href="#!/profile">Profile</a></li>
            <li><a href="http://talk.<%= project_url %>.org/" target="_blank">Talk</a></li>
            <li><a href="http://blog.<%= project_url %>.org/" target="_blank">Blog</a></li>
          </ul>
        </nav>
      </header>

      <div class="main">
        <section data-page="home">
          <p>Home</p>
        </section>

        <section data-page="about">
          <p>About</p>
        </section>

        <section data-page="classify">
          <p>Classify</p>
        </section>

        <section data-page="profile">
          <p>Profile</p>
        </section>
      </div>
    </div>

    <script src="./scripts/lib/require.js"></script>

    <script>
      requirejs.config({
        baseUrl: './scripts',

        paths: {
          'jQuery': 'lib/jquery',
          'Spine': 'lib/spine/relation',
          'Leaflet': 'lib/leaflet',

          'zooniverse': 'lib/zooniverse',
        },

        shim: {
          'jQuery': {
            exports: function() {
              return jQuery.noConflict();
            }
          },

          'Spine': {
            deps: ['jQuery', 'lib/spine/spine'],
            exports: 'Spine'
          },

          'Leaflet': {
            deps: ['jQuery'],
            exports: function($) {
              var styleTags = ([
                '<link rel="stylesheet" href="styles/lib/leaflet/leaflet.css" />',
                '<!--[if lte IE 8]>',
                    '<link rel="stylesheet" href="styles/lib/leaflet/leaflet.ie.css" />',
                '<![endif]-->'
                ]).join('\n');

              var head = $('head');
              if (!~head.html().indexOf('leaflet.css')) head.append(styleTags);

              return L;
            }
          }
        }
      });

      require(['<%= project_js%>']);
    </script>
  </body>
</html>
